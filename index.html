<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ãšltimo Nivel</title>

  <style>
    :root{
      --bg:#06110d;
      --ink:#e7fff4;
      --muted:#b7d9c9;
      --line:#0e2f25;
      --accent:#31c48d;
    }
    *{box-sizing:border-box}

    body{
      margin:0; min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--ink);
      display:flex; align-items:center; justify-content:center;
      padding:24px;
      overflow:hidden;
      background:#030a07;
    }

    /* ====== VIDEO BACKGROUND (local) ====== */
    #bgvideo{
      position:fixed;
      top:50%; left:50%;
      transform:translate(-50%,-50%);
      min-width:100%;
      min-height:100%;
      width:auto;
      height:auto;
      z-index:-2;
      object-fit:cover;
      filter: blur(2px) brightness(.50) contrast(1.12);
      opacity:.20; /* sutil */
    }

    /* capa para mantener el mood verde oscuro y legibilidad */
    .overlay{
      position:fixed; inset:0;
      z-index:-1;
      background: radial-gradient(1200px 700px at 50% 35%,
        rgba(10,42,31,.55) 0%,
        rgba(6,17,13,.86) 55%,
        rgba(3,10,7,.93) 100%);
    }

    /* ====== CARD ====== */
    .card{
      width:min(760px,100%);
      background: rgba(255,255,255,.03);
      border:1px solid var(--line);
      border-radius:20px;
      padding:22px;
      box-shadow: 0 20px 60px rgba(0,0,0,.45);
      backdrop-filter: blur(8px);
    }
    .topbar{
      display:flex; justify-content:space-between; align-items:center;
      font-size:12px; letter-spacing:.15em; text-transform:uppercase;
      color:var(--muted); margin-bottom:10px;
    }
    .dot{
      width:8px;height:8px;border-radius:999px;
      background:var(--accent);
      box-shadow:0 0 16px rgba(49,196,141,.6);
      display:inline-block;margin-right:8px;
    }
    h1{margin:0 0 10px;font-size:22px; letter-spacing:.2px}
    p{margin:10px 0;line-height:1.62}
    .muted{color:var(--muted);font-size:14px}
    .btns{display:grid;gap:10px;margin-top:18px}
    button{
      border:1px solid var(--line);
      background: rgba(49,196,141,.15);
      color:var(--ink);
      padding:14px;
      border-radius:14px;
      font-weight:700;
      cursor:pointer;
      transition: transform .06s ease, background .2s ease;
    }
    button:hover{background: rgba(49,196,141,.25)}
    button:active{transform: translateY(1px)}
    button.secondary{ background: transparent; color:var(--muted); }
    button.secondary:hover{background: rgba(255,255,255,.03); color:var(--ink)}

    .input{
      width:100%;padding:12px;margin-top:12px;
      border-radius:12px;border:1px solid var(--line);
      background: rgba(0,0,0,.20);color:var(--ink);
      outline:none;
      font-size:16px;
    }
    .hint{margin-top:10px;font-size:13px;color:var(--muted)}
    .ok{color:#7CFCB2;font-weight:800}
    .no{color:#ffb3b3;font-weight:800}
    .divider{height:1px; background: var(--line); margin:14px 0}
    .big{font-size:18px}
  </style>
</head>

<body>

<!-- ğŸŒŒ Background video -->
<video id="bgvideo" autoplay muted loop playsinline preload="auto">
  <source src="video.mp4" type="video/mp4">
</video>
<div class="overlay"></div>

<!-- ğŸµ Music (your file) -->
<audio id="bgm" loop preload="auto">
  <source src="music.mp3" type="audio/mpeg">
</audio>

<div class="card">
  <div class="topbar">
    <div><span class="dot"></span><span id="progress">1/1</span></div>
    <div id="tag">Ãºltimo nivel</div>
  </div>

  <h1 id="title"></h1>
  <div id="content"></div>
  <div class="btns" id="btns"></div>
</div>

<script>
/* ===== CONFIG ===== */
const NAME = "Mayra";

/* ===== MUSIC CONTROL (fade-in) ===== */
const bgm = document.getElementById("bgm");
let musicStarted = false;
function startMusic(){
  if (musicStarted) return;
  musicStarted = true;
  bgm.volume = 0;
  bgm.play().catch(()=>{});
  let v = 0;
  const fade = setInterval(()=>{
    v += 0.02;
    bgm.volume = Math.min(v, 0.26);
    if (v >= 0.26) clearInterval(fade);
  }, 120);
}

/* ===== HELPERS ===== */
let step = 0;
function el(id){ return document.getElementById(id); }
function go(n){ step = n; render(); }
function normalize(s){
  return (s||"").toLowerCase()
    .normalize("NFD").replace(/[\u0300-\u036f]/g,"")
    .replace(/[^\w\s]/g,"")
    .replace(/\s+/g," ")
    .trim();
}

/* ===== FLOW =====
   6 preguntas normales
   + pregunta fecha (18 de Enero)
   + desbloqueo
   + lista x3
   + propuesta
*/
const steps = [
/* 0 INTRO */
{
  tag:"inicio",
  title:`Hola, ${NAME}. ğŸ’š`,
  html:`
    <p class="muted">Okâ€¦ esto es algo chiquito, pero lo hice con intenciÃ³n.</p>
    <p>Me gusta lo que estamos viviendo porque se siente fÃ¡cil. No por â€œsimpleâ€, sino por real.</p>
    <p>AsÃ­ que te armÃ© un juego rÃ¡pido: bonito, inteligente, y muy nosotros. Sin presiÃ³n.</p>
    <div class="divider"></div>
    <p class="muted">Reglas:</p>
    <p class="muted">1) No te saltes nada.<br>2) Si sonrÃ­es, vas bien.<br>3) Si te pones nerviosaâ€¦ yo tambiÃ©n ğŸ˜Œ</p>
  `,
  buttons:[{
    text:"Empezar",
    action:()=>{ startMusic(); go(1); }
  }]
},

/* 1 Q1 */
{
  tag:"pregunta 1/6",
  title:"Nivel 1 â€” SeÃ±al clarÃ­sima ğŸ˜",
  html:`
    <p>Empezamos suave, pero real.</p>
    <p class="big"><b>Â¿CuÃ¡l es la seÃ±al mÃ¡s obvia de que me gustas?</b></p>
    <p class="muted">No te asustes: todas son verdadâ€¦ solo elige la que mÃ¡s te dÃ© risa.</p>
  `,
  buttons:[
    { text:"Me importa tu dÃ­a de verdad", action:()=>go(2) },
    { text:"Me dan ganas de verte aunque estÃ© cansado", action:()=>go(2) },
    { text:"Contigo me da paz (y eso no es comÃºn)", action:()=>go(2) }
  ]
},

/* 2 Q2 */
{
  tag:"pregunta 2/6",
  title:"Nivel 2 â€” Lectura fina ğŸ§ ",
  html:`
    <p class="muted">Esta es de esas que dicen mucho sin decirlo.</p>
    <p class="big"><b>Cuando alguien te importaâ€¦ Â¿quÃ© cambia?</b></p>
    <p>Elige la opciÃ³n mÃ¡s â€œnosotrosâ€:</p>
  `,
  buttons:[
    { text:"Dejas de fingir y te sientes tÃº", action:()=>go(3) },
    { text:"Todo se vuelve mÃ¡s simple, pero mÃ¡s bonito", action:()=>go(3) },
    { text:"Ya no buscas emociÃ³nâ€¦ buscas calma", action:()=>go(3) }
  ]
},

/* 3 Q3 (texto) */
{
  tag:"pregunta 3/6",
  title:"Nivel 3 â€” Completa la frase",
  html:`
    <p>Quiero una respuesta tuya, no de opciÃ³n mÃºltiple ğŸ˜Œ</p>
    <p class="big"><b>Completa:</b> â€œSe siente ______ contigo.â€</p>
    <p class="muted">Una o dos palabras. Lo primero que te salga.</p>
    <input id="a3" class="input" placeholder="EscrÃ­belo aquÃ­â€¦" autocomplete="off">
    <div id="fb3" class="hint">Tip: puede ser â€œfÃ¡cilâ€, â€œbonitoâ€, â€œrealâ€, â€œen pazâ€â€¦</div>
  `,
  buttons:[
    { text:"Continuar", action:()=>{
        const v = normalize(el("a3").value);
        if(v.length >= 2) go(4);
        else el("fb3").innerHTML = `<span class="no">Pon algo chiquito pero real ğŸ˜Œ</span>`;
      }
    },
    { text:"Dame idea", secondary:true, action:()=>{
        el("a3").value = "fÃ¡cil y bonito";
        el("fb3").innerHTML = `<span class="ok">Esooo.</span> Ahora sÃ­.`;
      }
    }
  ]
},

/* 4 Q4 */
{
  tag:"pregunta 4/6",
  title:"Nivel 4 â€” La respuesta adulta ğŸ’š",
  html:`
    <p class="muted">RomÃ¡ntica sin ser cursi.</p>
    <p class="big"><b>Â¿QuÃ© te convence de algo bonito?</b></p>
    <p>Elige:</p>
  `,
  buttons:[
    { text:"Que se sienta natural, no forzado", action:()=>go(5) },
    { text:"Que haya intenciÃ³n, no prisa", action:()=>go(5) },
    { text:"Que haya pazâ€¦ y ganas", action:()=>go(5) }
  ]
},

/* 5 Q5 */
{
  tag:"pregunta 5/6",
  title:"Nivel 5 â€” Trampa bonita ğŸ˜",
  html:`
    <p class="muted">Si te rÃ­es aquÃ­, ya ganamos.</p>
    <p class="big"><b>Si yo pudiera pedir un â€œpower-upâ€ para lo nuestro, serÃ­a:</b></p>
    <p class="muted">Elige el que sienta mÃ¡s tÃº.</p>
  `,
  buttons:[
    { text:"MÃ¡s momentos simples que se sientan enormes", action:()=>go(6) },
    { text:"MÃ¡s besosâ€¦ y menos miedo", action:()=>go(6) },
    { text:"MÃ¡s tÃº aquÃ­â€¦ conmigo", action:()=>go(6) }
  ]
},

/* 6 Q6 */
{
  tag:"pregunta 6/6",
  title:"Nivel 6 â€” La mÃ¡s real",
  html:`
    <p>Ãšltima de las â€œnormalesâ€.</p>
    <p class="big"><b>Â¿CuÃ¡l es la diferencia entre gustar y elegir?</b></p>
    <p class="muted">No hay respuesta perfectaâ€¦ pero sÃ­ una que se siente verdadera.</p>
  `,
  buttons:[
    { text:"Gustar es emociÃ³n; elegir es intenciÃ³n", action:()=>go(7) },
    { text:"Gustar es hoy; elegir es seguir maÃ±ana", action:()=>go(7) },
    { text:"Gustar es fÃ¡cil; elegir es cuidarlo", action:()=>go(7) }
  ]
},

/* 7 DATE QUESTION */
{
  tag:"nivel extra",
  title:"Nivel extra â€” Memoria del corazÃ³n ğŸ—“ï¸",
  html:`
    <p class="muted">Okâ€¦ esta sÃ­ importa.</p>
    <p class="big"><b>Â¿Sabes cuÃ¡ndo fue nuestra primer cita?</b></p>
    <p class="muted">EscrÃ­belo asÃ­: â€œ18 de Eneroâ€.</p>
    <input id="date" class="input" placeholder="18 de Enero" autocomplete="off">
    <div id="fb7" class="hint">Tip: tambiÃ©n sirve â€œ18 eneroâ€.</div>
  `,
  buttons:[
    { text:"Confirmar", action:()=>{
        const ans = normalize(el("date").value);
        const ok = ans.includes("18") && (ans.includes("enero") || ans.includes("ene"));
        if(ok){
          el("fb7").innerHTML = `<span class="ok">Correcto.</span> ğŸ’š`;
          setTimeout(()=>go(8), 650);
        } else {
          el("fb7").innerHTML = `<span class="no">Casi.</span> Pista: fue el <b>18</b>â€¦ de <b>Enero</b> ğŸ˜`;
        }
      }
    },
    { text:"Dame pista", secondary:true, action:()=>{
        el("fb7").innerHTML = `Pista: nÃºmero <b>18</b> + mes <b>Enero</b> ğŸ˜‰`;
      }
    }
  ]
},

/* 8 UNLOCKED */
{
  tag:"ğŸ”“",
  title:"Desbloqueaste una pregunta secreta",
  html:`
    <p class="big"><b>Okâ€¦ entonces sÃ­ te acuerdas.</b></p>
    <p>Y si te acuerdas de eso, es porque lo que estamos viviendo importa.</p>
    <p class="muted">No es un juego yaâ€¦ pero quiero hacerlo bonito.</p>
  `,
  buttons:[{ text:"Siguiente", action:()=>go(9) }]
},

/* 9 READY 1 */
{
  tag:"â€¦",
  title:"Antes de continuarâ€¦",
  html:`
    <p class="big"><b>Â¿EstÃ¡s lista?</b></p>
    <p class="muted">Respira. No hay prisa.</p>
  `,
  buttons:[
    { text:"SÃ­", action:()=>go(10) },
    { text:"EspÃ©rame tantito", secondary:true, action:()=>{} }
  ]
},

/* 10 READY 2 */
{
  tag:"â€¦",
  title:"Okâ€¦ Â¿segura?",
  html:`
    <p class="big"><b>Â¿Lista de verdad?</b></p>
    <p class="muted">Esta parte no se puede â€œdesverâ€ ğŸ˜Œ</p>
  `,
  buttons:[
    { text:"SÃ­, ya", action:()=>go(11) },
    { text:"Me estÃ¡s poniendo nerviosa", secondary:true, action:()=>go(11) }
  ]
},

/* 11 READY 3 */
{
  tag:"â€¦",
  title:"Ãšltima vez",
  html:`
    <p class="big"><b>Ãšltima confirmaciÃ³n:</b></p>
    <p class="big"><b>Â¿EstÃ¡s lista?</b></p>
    <p class="muted">Yo sÃ­.</p>
  `,
  buttons:[ { text:"SÃ­ ğŸ˜Œ", action:()=>go(12) } ]
},

/* 12 PROPOSAL */
{
  tag:"final",
  title:"Ãšltimo nivel",
  html:`
    <p class="muted">Ya fuera de juegoâ€¦</p>
    <p>Me gusta cÃ³mo se siente estar contigo. Me gusta que contigo todo se siente mÃ¡s fÃ¡cil, mÃ¡s real, mÃ¡s bonito.</p>
    <p>No quiero correr. Solo quiero elegirte bien: con calma y con intenciÃ³n.</p>
    <div class="divider"></div>
    <p class="big"><b>${NAME}â€¦ Â¿quieres ser mi novia?</b></p>
  `,
  buttons:[
    { text:"SÃ­ ğŸ’š", action:()=>go(13) },
    { text:"Obvio sÃ­ ğŸ˜­ğŸ’š", action:()=>go(13) }
  ]
},

/* 13 CELEBRATION */
{
  tag:"âœ…",
  title:"Checkpoint desbloqueado",
  html:`
    <p class="ok">Logro desbloqueado: <b>Novios</b> ğŸ’š</p>
    <p class="muted">Recompensa inmediata:</p>
    <p>1) Abrazo<br>2) Beso<br>3) â€œOk yaâ€¦ ven acÃ¡â€ ğŸ˜</p>
    <div class="divider"></div>
    <p class="muted">Fin del juego. Inicio de lo bueno.</p>
  `,
  buttons:[ { text:"Fin", action:()=>alert("ğŸ’š") } ]
}
];

function render(){
  const s = steps[step];
  el("tag").textContent = s.tag || "Ãºltimo nivel";
  el("progress").textContent = `${step+1}/${steps.length}`;
  el("title").textContent = s.title || "";
  el("content").innerHTML = s.html || "";

  const btns = el("btns");
  btns.innerHTML = "";
  (s.buttons||[]).forEach(b=>{
    const x = document.createElement("button");
    x.textContent = b.text;
    if (b.secondary) x.classList.add("secondary");
    x.onclick = b.action || (()=>go(b.next));
    btns.appendChild(x);
  });
}

render();
</script>
</body>
</html>
