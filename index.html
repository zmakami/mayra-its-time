<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>√öltimo Nivel</title>
  <style>
    :root{
      --bg:#06110d;
      --panel:#081a14;
      --ink:#e7fff4;
      --muted:#b7d9c9;
      --line:#0e2f25;
      --accent:#31c48d;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(1200px 700px at 50% 35%, #0a2a1f 0%, var(--bg) 55%, #030a07 100%);
      color:var(--ink);
      display:flex; align-items:center; justify-content:center;
      padding:24px;
    }
    .shell{ width:min(720px, 100%); display:flex; flex-direction:column; gap:14px; align-items:center; }
    .card{
      width:100%;
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:20px;
      padding:22px;
      box-shadow: 0 20px 60px rgba(0,0,0,.45);
      backdrop-filter: blur(8px);
    }
    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px; margin-bottom:10px;
      color:var(--muted);
      font-size:12px;
      letter-spacing:.14em;
      text-transform:uppercase;
    }
    .dot{width:8px;height:8px;border-radius:999px;background:var(--accent); box-shadow:0 0 18px rgba(49,196,141,.55);}
    h1{margin:0 0 10px; font-size:22px; letter-spacing:.2px;}
    p{margin:10px 0; line-height:1.55; font-size:16px; color:var(--ink);}
    .muted{color:var(--muted); font-size:14px}
    .btns{display:grid; gap:10px; margin-top:16px;}
    button{
      appearance:none;
      border:1px solid var(--line);
      background: rgba(49,196,141,.14);
      color:var(--ink);
      padding:13px 14px;
      border-radius:14px;
      font-weight:700;
      font-size:15px;
      cursor:pointer;
      transition: transform .06s ease, background .2s ease, border-color .2s ease;
    }
    button:hover{background: rgba(49,196,141,.20); border-color:#1f5a45}
    button:active{transform: translateY(1px)}
    button.secondary{ background: transparent; color:var(--muted); }
    button.secondary:hover{border-color:#1f5a45; background: rgba(255,255,255,.03); color:var(--ink)}
    .input{
      width:100%;
      margin-top:12px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.18);
      color:var(--ink);
      outline:none;
      font-size:16px;
    }
    .input:focus{border-color:#1f5a45; box-shadow:0 0 0 4px rgba(49,196,141,.15)}
    .pillrow{display:flex; flex-wrap:wrap; gap:8px; margin-top:10px}
    .pill{
      border:1px solid var(--line);
      background: rgba(14,47,37,.45);
      color:var(--muted);
      padding:8px 10px;
      border-radius:999px;
      font-size:13px;
      user-select:none;
    }
    .hint{margin-top:10px; font-size:13px; color:var(--muted)}
    .ok{color:#7CFCB2; font-weight:800}
    .no{color:#ffb3b3; font-weight:800}
    .divider{height:1px; background: var(--line); margin:14px 0}
  </style>
</head>
<body>
  <div class="shell">
    <div class="card">
      <div class="topbar">
        <div style="display:flex;align-items:center;gap:10px;">
          <div class="dot"></div>
          <div id="progress">1/1</div>
        </div>
        <div id="tag">√∫ltimo nivel</div>
      </div>

      <h1 id="title"></h1>
      <div id="content"></div>
      <div class="btns" id="btns"></div>
    </div>
  </div>

<script>
/* ====== EDITA AQU√ç ====== */
const NAME = "Mayra";

/* ====== STATE ====== */
const state = {
  step: 0,
  q: 0,
  score: 0,
  code: null
};

function el(id){ return document.getElementById(id); }
function normalize(s){
  return (s||"").toLowerCase()
    .normalize("NFD").replace(/[\u0300-\u036f]/g,"")
    .replace(/[^\w\s]/g,"")
    .replace(/\s+/g," ")
    .trim();
}

// Clave final (no obvia, pero rom√°ntica)
function makeCode(a,b,c){
  // a,b,c son respuestas/elecciones
  const base = `${a}|${b}|${c}|${NAME}`;
  let sum = 0;
  for (let i=0;i<base.length;i++) sum = (sum + base.charCodeAt(i)*(i+3)) % 9973;
  const letters = "ABCDEFGHJKLMNPQRSTUVWXYZ";
  const code =
    letters[(sum     ) % letters.length] +
    letters[(sum>>2  ) % letters.length] +
    letters[(sum>>4  ) % letters.length] +
    letters[(sum>>6  ) % letters.length];
  return code;
}

/* ====== HELPERS ====== */
function go(n){ state.step = n; render(); }

function setFeedback(msg, good=false){
  const fb = el("feedback");
  if (!fb) return;
  fb.innerHTML = good ? `<span class="ok">Listo.</span> ${msg}` : msg;
}

function render(){
  const s = steps[state.step];
  el("tag").textContent = s.tag || "√∫ltimo nivel";
  el("title").textContent = s.title || "";
  el("content").innerHTML = s.html || "";

  // contador solo num
  el("progress").textContent = `${state.step+1}/${steps.length}`;

  const btns = el("btns");
  btns.innerHTML = "";
  (s.buttons||[]).forEach(b=>{
    const btn = document.createElement("button");
    btn.textContent = b.text;
    if (b.secondary) btn.classList.add("secondary");
    btn.onclick = b.action ? b.action : () => go(b.next);
    btns.appendChild(btn);
  });
}

/* ======================
   6 PREGUNTAS SMART/CUTE
   ====================== */

/* Q1 */
function q1(choice){
  state.a1 = choice; // guardar
  state.score++;
  go(2);
}

/* Q2 */
function q2(choice){
  state.a2 = choice;
  state.score++;
  go(3);
}

/* Q3 (orden) */
function q3check(){
  const ans = normalize(el("ans3").value);
  // Respuesta esperada: "contigo se siente facil" (acepta variaciones)
  const ok = ans.includes("contigo") && (ans.includes("facil") || ans.includes("bonito")) && ans.includes("se siente");
  if (ok){
    state.score++;
    go(4);
  } else {
    setFeedback("Casi üòè Tip: usa ‚ÄúSe siente‚Ä¶‚Äù y mete ‚Äúcontigo‚Äù + ‚Äúf√°cil/bonito‚Äù.");
  }
}

/* Q4 (elige la verdadera) */
function q4(choice){
  state.a4 = choice;
  state.score++;
  go(5);
}

/* Q5 (mini ‚Äúl√≥gica‚Äù rom√°ntica, sin mates) */
function q5(choice){
  state.a5 = choice;
  state.score++;
  // genera c√≥digo basado en 3 elecciones para que se sienta ‚Äúhack‚Äù
  state.code = makeCode(state.a1, state.a2, state.a4);
  go(6);
}

/* Q6 (verificaci√≥n del c√≥digo) */
function q6check(){
  const ans = (el("ans6").value || "").toUpperCase().trim();
  const fb = el("feedback");
  if (ans === state.code){
    fb.innerHTML = `<span class="ok">Acceso concedido.</span>`;
    setTimeout(()=>go(7), 450);
  } else {
    fb.innerHTML = `<span class="no">Nope.</span> Est√° cerquita‚Ä¶ vuelve a la pantalla anterior y c√≥pialo tal cual üòå`;
  }
}

/* ====== SCREENS ====== */
const steps = [
  {
    tag: "inicio",
    title: `Hola, ${NAME}.`,
    html: `
      <p class="muted">Minimal. Verde oscuro. Sin drama.</p>
      <p>Te hice un jueguito corto. No es examen‚Ä¶ es <b>nosotros</b>.</p>
      <div class="divider"></div>
      <p class="muted">Reglas:</p>
      <p class="muted">1) No te saltes nada.<br>2) Si te r√≠es, vas bien.<br>3) El final vale la pena.</p>
    `,
    buttons: [{ text:"Empezar", next:1 }]
  },

  /* Pregunta 1/6 */
  {
    tag: "pregunta 1/6",
    title: "Modo Mayra activado üòå",
    html: `
      <p>Elige la opci√≥n correcta:</p>
      <p><b>Si esto fuera una relaci√≥n en ‚Äúmodo f√°cil‚Äù, ser√≠a porque‚Ä¶</b></p>
      <div id="feedback" class="hint"></div>
    `,
    buttons: [
      { text:"Contigo no hay presi√≥n", action: () => q1("nopresion") },
      { text:"Me dejas ser yo", action: () => q1("seryo") },
      { text:"Las dos (obvio)", action: () => q1("lasdos") }
    ]
  },

  /* Pregunta 2/6 */
  {
    tag: "pregunta 2/6",
    title: "Pregunta capciosa üòè",
    html: `
      <p><b>¬øCu√°l de estas es una se√±al clar√≠sima de que me gustas?</b></p>
      <p class="muted">(solo una es correcta‚Ä¶ seg√∫n yo)</p>
      <div id="feedback" class="hint"></div>
    `,
    buttons: [
      { text:"Hago planes contigo", action: () => q2("planes") },
      { text:"Te presumo sin decir que te presumo", action: () => q2("presumo") },
      { text:"Todas las anteriores", action: () => q2("todas") }
    ]
  },

  /* Pregunta 3/6 (texto) */
  {
    tag: "pregunta 3/6",
    title: "Completa la frase",
    html: `
      <p>Escribe una frase corta que suene a nosotros:</p>
      <div class="pillrow">
        <div class="pill">Se siente‚Ä¶</div>
        <div class="pill">contigo</div>
        <div class="pill">f√°cil</div>
        <div class="pill">bonito</div>
      </div>
      <input class="input" id="ans3" placeholder="Ej: Se siente f√°cil contigo‚Ä¶" autocomplete="off" />
      <div id="feedback" class="hint">Tip: no tiene que ser perfecta, solo real.</div>
    `,
    buttons: [
      { text:"Comprobar", action: q3check },
      { text:"Dame pista", action: () => setFeedback("Prueba: ‚ÄúSe siente f√°cil y bonito contigo.‚Äù", true), secondary:true }
    ]
  },

  /* Pregunta 4/6 */
  {
    tag: "pregunta 4/6",
    title: "Elige la verdad (sin miedo)",
    html: `
      <p><b>Lo que m√°s me gusta de estar contigo es‚Ä¶</b></p>
      <div class="muted">Ojo: todas son bonitas, pero una es la m√°s real.</div>
      <div id="feedback" class="hint"></div>
    `,
    buttons: [
      { text:"Que todo se siente natural", action: () => q4("natural") },
      { text:"Que me das paz", action: () => q4("paz") },
      { text:"Que me dan ganas de quedarme", action: () => q4("quedarme") }
    ]
  },

  /* Pregunta 5/6 (smart rom√°ntica) */
  {
    tag: "pregunta 5/6",
    title: "Desbloqueo üòå",
    html: `
      <p>Elige el ‚Äúpower-up‚Äù correcto:</p>
      <p class="muted">Si estuvi√©ramos jugando y te doy un bot√≥n para subir de nivel, dir√≠a:</p>
      <div id="feedback" class="hint"></div>
    `,
    buttons: [
      { text:"M√°s calma, m√°s nosotros", action: () => q5("calma") },
      { text:"M√°s besos, menos miedo", action: () => q5("besos") },
      { text:"M√°s t√∫ aqu√≠, conmigo", action: () => q5("contigo") }
    ]
  },

  /* Pregunta 6/6 (c√≥digo) */
  {
    tag: "pregunta 6/6",
    title: "√öltimo filtro (smart pero cute)",
    html: `
      <p>Ok. Gener√© un c√≥digo final con tus respuestas.</p>
      <p class="muted">C√≥pialo EXACTO para entrar al √∫ltimo nivel:</p>
      <p style="font-size:20px;letter-spacing:.25em;color:var(--accent);font-weight:900;margin:8px 0;">
        <span id="code">${state.code || "----"}</span>
      </p>
      <input class="input" id="ans6" placeholder="Escribe el c√≥digo aqu√≠‚Ä¶" autocomplete="off" />
      <div id="feedback" class="hint">Tip: sin espacios.</div>
    `,
    buttons: [
      { text:"Entrar", action: q6check },
      { text:"Repetir c√≥digo", action: () => { el("ans6").value=""; }, secondary:true }
    ]
  },

  /* Fuera de juego */
  {
    tag: "fuera de juego",
    title: "Ok‚Ä¶ ya en serio.",
    html: `
      <p>Gracias por jugarlo como yo quer√≠a que lo vivieras: con calma.</p>
      <p>Me gusta c√≥mo se siente estar contigo. Me gusta que no se siente forzado, se siente <b>real</b>.</p>
      <p>Y la neta‚Ä¶ me dan ganas de seguir construyendo esto bonito, contigo.</p>
    `,
    buttons: [{ text:"Siguiente", next:8 }]
  },

  /* Final */
  {
    tag: "final",
    title: "√öltimo nivel",
    html: `
      <p class="muted">Respira.</p>
      <p style="font-size:18px"><b>${NAME}‚Ä¶ ¬øquieres ser mi novia?</b></p>
    `,
    buttons: [
      { text:"S√≠ üíö", next:9 },
      { text:"Obvio s√≠ üòå", next:9 }
    ]
  },

  /* Celebraci√≥n */
  {
    tag: "‚úÖ",
    title: "Checkpoint desbloqueado",
    html: `
      <p class="ok">Logro desbloqueado: <b>Novios</b> üíö</p>
      <p class="muted">Recompensa:</p>
      <p>1) Abrazo<br>2) Beso<br>3) Seguimos escribiendo esto‚Ä¶ con calma y con intenci√≥n.</p>
      <div class="divider"></div>
      <p class="muted">Fin del juego. Inicio de lo bueno.</p>
    `,
    buttons: [{ text:"Fin", action: () => alert("üíö") }]
  }
];

render();
</script>
</body>
</html>
