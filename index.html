<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ãšltimo Nivel</title>

  <style>
    :root{
      --bg:#06110d;
      --ink:#e7fff4;
      --muted:#b7d9c9;
      --line:#0e2f25;
      --accent:#31c48d;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(1200px 700px at 50% 35%, #0a2a1f 0%, var(--bg) 55%, #030a07 100%);
      color:var(--ink);
      display:flex; align-items:center; justify-content:center;
      padding:24px;
    }
    .card{
      width:min(760px,100%);
      background: rgba(255,255,255,.03);
      border:1px solid var(--line);
      border-radius:20px;
      padding:22px;
      box-shadow: 0 20px 60px rgba(0,0,0,.45);
    }
    .topbar{
      display:flex; justify-content:space-between; align-items:center;
      font-size:12px; letter-spacing:.15em; text-transform:uppercase;
      color:var(--muted); margin-bottom:10px;
    }
    .dot{
      width:8px;height:8px;border-radius:999px;
      background:var(--accent);
      box-shadow:0 0 16px rgba(49,196,141,.6);
      display:inline-block;margin-right:8px;
    }
    h1{margin:0 0 10px;font-size:22px; letter-spacing:.2px}
    p{margin:10px 0;line-height:1.6}
    .muted{color:var(--muted);font-size:14px}
    .btns{display:grid;gap:10px;margin-top:18px}
    button{
      border:1px solid var(--line);
      background: rgba(49,196,141,.15);
      color:var(--ink);
      padding:14px;
      border-radius:14px;
      font-weight:700;
      cursor:pointer;
      transition: transform .06s ease, background .2s ease;
    }
    button:hover{background: rgba(49,196,141,.25)}
    button:active{transform: translateY(1px)}
    button.secondary{ background: transparent; color:var(--muted); }
    button.secondary:hover{background: rgba(255,255,255,.03); color:var(--ink)}
    .input{
      width:100%;padding:12px;margin-top:12px;
      border-radius:12px;border:1px solid var(--line);
      background: rgba(0,0,0,.2);color:var(--ink);
      outline:none;
      font-size:16px;
    }
    .hint{margin-top:10px;font-size:13px;color:var(--muted)}
    .ok{color:#7CFCB2;font-weight:800}
    .no{color:#ffb3b3;font-weight:800}
    .divider{height:1px; background: var(--line); margin:14px 0}
    .big{font-size:18px}
    .em{color:var(--accent); font-weight:800}
  </style>
</head>

<body>

<!-- ğŸµ AUDIO -->
<audio id="bgm" loop preload="auto">
  <source src="music.mp3" type="audio/mpeg">
</audio>

<div class="card">
  <div class="topbar">
    <div><span class="dot"></span><span id="progress">1/1</span></div>
    <div id="tag">Ãºltimo nivel</div>
  </div>

  <h1 id="title"></h1>
  <div id="content"></div>
  <div class="btns" id="btns"></div>
</div>

<script>
/* ===== CONFIG ===== */
const NAME = "Mayra";

/* ===== MUSIC CONTROL (fade-in) ===== */
const bgm = document.getElementById("bgm");
let musicStarted = false;
function startMusic(){
  if (musicStarted) return;
  musicStarted = true;
  bgm.volume = 0;
  bgm.play().catch(()=>{});
  let v = 0;
  const fade = setInterval(()=>{
    v += 0.02;
    bgm.volume = Math.min(v, 0.26);
    if (v >= 0.26) clearInterval(fade);
  }, 120);
}

/* ===== HELPERS ===== */
let step = 0;
const state = { a1:null, a2:null, a3:null, a4:null, a5:null, a6:null };

function el(id){ return document.getElementById(id); }
function go(n){ step = n; render(); }
function normalize(s){
  return (s||"").toLowerCase()
    .normalize("NFD").replace(/[\u0300-\u036f]/g,"")
    .replace(/[^\w\s]/g,"")
    .replace(/\s+/g," ")
    .trim();
}

/* ===== GAME SCREENS =====
   6 preguntas normales + 1 fecha + 3 "listas?" + propuesta + final
*/
const steps = [
/* 0 INTRO */
{
  tag:"inicio",
  title:`Hola, ${NAME}. ğŸ’š`,
  html:`
    <p class="muted">Esto es un jueguito cortoâ€¦ pero lo hice con intenciÃ³n.</p>
    <p>Si estÃ¡s leyendo esto, es porque elegiste quedarte un ratito conmigo. Y la netaâ€¦ eso ya dice mucho.</p>
    <p>Hoy no vengo a impresionarte. Vengo a decirte algo bonito, a mi manera: <b>con calma</b>, <b>con detalle</b> y <b>sin presiÃ³n</b>.</p>
    <div class="divider"></div>
    <p class="muted">Reglas:</p>
    <p class="muted">1) No te saltes nada.<br>2) Si sonrÃ­es, vas bien.<br>3) Si se te acelera poquito el corazÃ³nâ€¦ tambiÃ©n es parte del juego ğŸ˜Œ</p>
  `,
  buttons:[{
    text:"Empezar",
    action:()=>{ startMusic(); go(1); }
  }]
},

/* 1 Q1 */
{
  tag:"pregunta 1/6",
  title:"Nivel 1 â€” SeÃ±al clarÃ­sima ğŸ˜",
  html:`
    <p>Ok. Empecemos suave.</p>
    <p class="big"><b>Â¿CuÃ¡l de estas cosas es la seÃ±al mÃ¡s obvia de que me gustas?</b></p>
    <p class="muted">Tip: ninguna es mentiraâ€¦ pero una es demasiado real.</p>
  `,
  buttons:[
    { text:"Me importa tu dÃ­a, de verdad", action:()=>{ state.a1="dia"; go(2); } },
    { text:"Me dan ganas de verte aunque estÃ© cansado", action:()=>{ state.a1="verte"; go(2); } },
    { text:"Me siento en paz contigo (y eso no es comÃºn)", action:()=>{ state.a1="paz"; go(2); } }
  ]
},

/* 2 Q2 */
{
  tag:"pregunta 2/6",
  title:"Nivel 2 â€” Lectura fina ğŸ§ ",
  html:`
    <p class="muted">Esta es de esas que dicen mucho sin decirlo.</p>
    <p class="big"><b>Cuando una persona te importa de verdad, Â¿quÃ© cambia?</b></p>
    <p>Elige la opciÃ³n mÃ¡s â€œnosotrosâ€:</p>
  `,
  buttons:[
    { text:"Dejas de fingir y te sientes tÃº", action:()=>{ state.a2="tÃº"; go(3); } },
    { text:"Todo se vuelve mÃ¡s simple, pero mÃ¡s bonito", action:()=>{ state.a2="simple"; go(3); } },
    { text:"Ya no buscas emociÃ³nâ€¦ buscas calma", action:()=>{ state.a2="calma"; go(3); } }
  ]
},

/* 3 Q3 (texto bonito) */
{
  tag:"pregunta 3/6",
  title:"Nivel 3 â€” Completa la frase (con estilo)",
  html:`
    <p>Quiero una respuesta tuya, no una de opciÃ³n mÃºltiple ğŸ˜Œ</p>
    <p class="big"><b>Completa:</b> â€œSe siente ______ contigo.â€</p>
    <p class="muted">Ejemplos: â€œfÃ¡cilâ€, â€œbonitoâ€, â€œrealâ€, â€œtranquiloâ€â€¦ lo que salga de ti.</p>
    <input id="a3" class="input" placeholder="EscrÃ­belo aquÃ­â€¦" autocomplete="off">
    <div id="fb3" class="hint">Tip: con una o dos palabras basta.</div>
  `,
  buttons:[
    { text:"Continuar", action:()=>{
        const v = normalize(el("a3").value);
        if(v.length >= 2){
          state.a3 = v;
          go(4);
        } else {
          el("fb3").innerHTML = `<span class="no">Pon algo chiquito pero real ğŸ˜Œ</span>`;
        }
      }
    },
    { text:"Dame idea", secondary:true, action:()=>{
        el("a3").value = "fÃ¡cil y bonito";
        el("fb3").innerHTML = `<span class="ok">Esooo.</span> Ahora sÃ­.`;
      }
    }
  ]
},

/* 4 Q4 */
{
  tag:"pregunta 4/6",
  title:"Nivel 4 â€” La respuesta adulta ğŸ’š",
  html:`
    <p class="muted">Ok, esta es romÃ¡ntica sin ser cursi.</p>
    <p class="big"><b>Â¿QuÃ© es lo que mÃ¡s te convence de algo bonito?</b></p>
    <p>Elige:</p>
  `,
  buttons:[
    { text:"Que se sienta natural, no forzado", action:()=>{ state.a4="natural"; go(5); } },
    { text:"Que haya intenciÃ³n, no prisa", action:()=>{ state.a4="intencion"; go(5); } },
    { text:"Que haya pazâ€¦ y ganas", action:()=>{ state.a4="pazganas"; go(5); } }
  ]
},

/* 5 Q5 (smart/chistosa) */
{
  tag:"pregunta 5/6",
  title:"Nivel 5 â€” Pick one (pero piensa ğŸ˜)",
  html:`
    <p class="muted">Esta es una trampa bonita.</p>
    <p class="big"><b>Si yo pudiera pedir un â€œpower-upâ€ para lo nuestro, serÃ­a:</b></p>
    <p>Elige el que te dÃ© mÃ¡s sonrisa:</p>
  `,
  buttons:[
    { text:"MÃ¡s momentos simples que se sientan enormes", action:()=>{ state.a5="momentos"; go(6); } },
    { text:"MÃ¡s besosâ€¦ y menos miedo", action:()=>{ state.a5="besos"; go(6); } },
    { text:"MÃ¡s tÃº aquÃ­â€¦ conmigo", action:()=>{ state.a5="tuconmigo"; go(6); } }
  ]
},

/* 6 Q6 (romÃ¡ntica lista) */
{
  tag:"pregunta 6/6",
  title:"Nivel 6 â€” La mÃ¡s real",
  html:`
    <p>Ãšltima de las â€œnormalesâ€.</p>
    <p class="big"><b>Â¿CuÃ¡l es la diferencia entre gustar y elegir?</b></p>
    <p class="muted">Respuesta correcta: la que se siente mÃ¡s verdadera.</p>
  `,
  buttons:[
    { text:"Gustar es emociÃ³n; elegir es intenciÃ³n", action:()=>{ state.a6="intencion"; go(7); } },
    { text:"Gustar es hoy; elegir es seguir maÃ±ana", action:()=>{ state.a6="maÃ±ana"; go(7); } },
    { text:"Gustar es fÃ¡cil; elegir es cuidarlo", action:()=>{ state.a6="cuidar"; go(7); } }
  ]
},

/* 7 EXTRA: fecha primera cita */
{
  tag:"bonus",
  title:"Nivel extra â€” Memoria del corazÃ³n ğŸ—“ï¸",
  html:`
    <p class="muted">Okâ€¦ esta sÃ­ es importante.</p>
    <p class="big"><b>Â¿Sabes cuÃ¡ndo fue nuestra primer cita?</b></p>
    <p class="muted">EscrÃ­belo asÃ­: â€œ18 de Eneroâ€ (sin pÃ¡nico ğŸ˜Œ)</p>
    <input id="date" class="input" placeholder="Ej: 18 de Enero" autocomplete="off">
    <div id="fb7" class="hint">Tip: no pasa nada si pones â€œ18 eneroâ€.</div>
  `,
  buttons:[
    { text:"Confirmar", action:()=>{
        const ans = normalize(el("date").value);
        const ok = ans.includes("18") && (ans.includes("enero") || ans.includes("ene"));
        if(ok){
          el("fb7").innerHTML = `<span class="ok">Correcto.</span> ğŸ’š`;
          setTimeout(()=>go(8), 650);
        } else {
          el("fb7").innerHTML = `<span class="no">Casi.</span> Pista: fue el <b>18</b>â€¦ de <b>Enero</b> ğŸ˜`;
        }
      }
    },
    { text:"Dame pista", secondary:true, action:()=>{
        el("fb7").innerHTML = `Pista: el nÃºmero es <b>18</b> y el mes es <b>Enero</b> ğŸ˜‰`;
      }
    }
  ]
},

/* 8 unlocked */
{
  tag:"desbloqueado",
  title:"ğŸ”“ Desbloqueaste una pregunta secreta",
  html:`
    <p class="big"><b>Okâ€¦ entonces sÃ­ te acuerdas.</b></p>
    <p>Y si te acuerdas de eso, es porque lo que estamos viviendo importa.</p>
    <p class="muted">No es un juego yaâ€¦ pero quiero hacerlo bonito.</p>
  `,
  buttons:[{ text:"Siguiente", action:()=>go(9) }]
},

/* 9 ready 1 */
{
  tag:"â€¦",
  title:"Antes de continuarâ€¦",
  html:`
    <p class="big"><b>Â¿EstÃ¡s lista?</b></p>
    <p class="muted">Respira. No hay prisa.</p>
  `,
  buttons:[
    { text:"SÃ­", action:()=>go(10) },
    { text:"EspÃ©rame tantito", secondary:true, action:()=>{ /* se queda */ } }
  ]
},

/* 10 ready 2 */
{
  tag:"â€¦",
  title:"Okâ€¦ Â¿segura?",
  html:`
    <p class="big"><b>Â¿Lista de verdad?</b></p>
    <p class="muted">Esta parte no se puede â€œdesverâ€ ğŸ˜Œ</p>
  `,
  buttons:[
    { text:"SÃ­, ya", action:()=>go(11) },
    { text:"Me estÃ¡s poniendo nerviosa", secondary:true, action:()=>go(11) }
  ]
},

/* 11 ready 3 */
{
  tag:"â€¦",
  title:"Ãšltima vez",
  html:`
    <p class="big"><b>Okâ€¦ Ãºltima confirmaciÃ³n:</b></p>
    <p class="big"><b>Â¿EstÃ¡s lista?</b></p>
    <p class="muted">Yo sÃ­.</p>
  `,
  buttons:[
    { text:"SÃ­ ğŸ˜Œ", action:()=>go(12) }
  ]
},

/* 12 proposal */
{
  tag:"final",
  title:"Ãšltimo nivel",
  html:`
    <p class="muted">Ya fuera de juegoâ€¦</p>
    <p>Me gusta cÃ³mo se siente estar contigo. Me gusta que contigo todo se siente mÃ¡s fÃ¡cil, mÃ¡s real, mÃ¡s bonito.</p>
    <p>No quiero correr. Solo quiero elegirte bien: con calma y con intenciÃ³n.</p>
    <div class="divider"></div>
    <p class="big"><b>${NAME}â€¦ Â¿quieres ser mi novia?</b></p>
  `,
  buttons:[
    { text:"SÃ­ ğŸ’š", action:()=>go(13) },
    { text:"Obvio sÃ­ ğŸ˜­ğŸ’š", action:()=>go(13) }
  ]
},

/* 13 celebration */
{
  tag:"âœ…",
  title:"Checkpoint desbloqueado",
  html:`
    <p class="ok">Logro desbloqueado: <b>Novios</b> ğŸ’š</p>
    <p class="muted">Recompensa inmediata:</p>
    <p>1) Abrazo<br>2) Beso<br>3) â€œOk yaâ€¦ ven acÃ¡â€ ğŸ˜</p>
    <div class="divider"></div>
    <p class="muted">Fin del juego. Inicio de lo bueno.</p>
  `,
  buttons:[
    { text:"Fin", action:()=>alert("ğŸ’š") }
  ]
}
];

function render(){
  const s = steps[step];
  el("tag").textContent = s.tag || "Ãºltimo nivel";
  el("progress").textContent = `${step+1}/${steps.length}`;
  el("title").textContent = s.title || "";
  el("content").innerHTML = s.html || "";

  const btns = el("btns");
  btns.innerHTML = "";
  (s.buttons||[]).forEach(b=>{
    const x = document.createElement("button");
    x.textContent = b.text;
    if (b.secondary) x.classList.add("secondary");
    x.onclick = b.action || (()=>go(b.next));
    btns.appendChild(x);
  });
}

render();
</script>
</body>
</html>
